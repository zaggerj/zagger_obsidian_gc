---
tags: DailyNote
searchterm: "#å‘¨è®°"
banner: "040 - Obsidian/é™„ä»¶/banners/daily-note-banner.gif"
cssclass: noyaml
banner_icon: ğŸ’Œ
banner_x: 0.5
banner_y: 0.38
week: 2024-22
created: 2024-05-27 14:51:27
updated: 2024-05-27 14:51:27
---

# 1. 2024å¹´05æœˆ27æ—¥

_æœ¬æ–‡ä»¶ä¸»æ—¨ï¼Œå¹¶é“¾æ¥åˆ°å‰ä¸€å¤©å’Œåä¸€å¤©æ–‡ä»¶_

<< [[2024å¹´05æœˆ26æ—¥]] | [[2024å¹´05æœˆ28æ—¥]]>>

## 1.1. Metadata

_æ·»åŠ ä¸€äº›å…ƒæ•°æ®ï¼Œæ–¹ä¾¿åç»­æœç´¢æŸ¥çœ‹ç­‰ç­‰_

Status:: #ç¬”è®°çŠ¶æ€/ğŸŒ± å‘èŠ½
Source Type:: #ğŸ“¥/ğŸ’­ æƒ³æ³• 
Note Type:: #ç¬”è®°
Topic:: [[00.å­¦ä¹ -å‰ç«¯]]
Author:: zagger
Source URL::
Modify:: 2024-05-27 æ˜ŸæœŸä¸€ 14:51:23

## 1.2. é•¿é’ç¬”è®°

_ä¸€å¥è¯æ¦‚æ‹¬è¿™ç¯‡ç¬”è®°çš„å†…å®¹_

- Summary::
å¥½çš„,æˆ‘ä¼šå°½é‡è¯¦ç»†åœ°ä»‹ç» Electron çš„Â `session`Â æ¨¡å—ã€‚

1. **ä¼šè¯ç®¡ç†**:
    
    - `session.defaultSession`: è¿”å›åº”ç”¨ç¨‹åºçš„é»˜è®¤ä¼šè¯å¯¹è±¡ã€‚å¯ä»¥é€šè¿‡å®ƒæ¥ç®¡ç†é»˜è®¤ä¼šè¯çš„è¡Œä¸ºã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    const { session } = require('electron');
    
    // è·å–é»˜è®¤ä¼šè¯å¯¹è±¡
    const defaultSession = session.defaultSession;
    
    // è®¾ç½®é»˜è®¤ä¼šè¯çš„ä»£ç†é…ç½®
    defaultSession.setProxy({ proxyRules: 'http=localhost:8080' }, () => {
      console.log('Proxy settings updated!');
    });
    ```
    
    - `session.fromPartition(partition)`: æ ¹æ®æŒ‡å®šçš„åˆ†åŒºåç§°åˆ›å»ºæˆ–è·å–ä¼šè¯å¯¹è±¡ã€‚è¿™åœ¨éœ€è¦éš”ç¦»ä¸åŒç”¨æˆ·æˆ–åŠŸèƒ½çš„ä¼šè¯æ—¶å¾ˆæœ‰ç”¨ã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä¼šè¯
    const privateSession = session.fromPartition('persist:private');
    
    // ä»ä¼šè¯ä¸­è·å– cookies
    privateSession.cookies.get({}, (error, cookies) => {
      console.log(cookies);
    });
    ```
    
2. **cookie ç®¡ç†**:
    
    - `session.cookies.get(filter, callback)`: è·å–æŒ‡å®šä¼šè¯ä¸­çš„ cookiesã€‚å¯ä»¥ä½¿ç”¨è¿‡æ»¤å™¨ç­›é€‰ cookiesã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // è·å–é»˜è®¤ä¼šè¯ä¸­æ‰€æœ‰çš„ cookies
    session.defaultSession.cookies.get({}, (error, cookies) => {
      if (error) throw error;
      console.log(cookies);
    });
    
    // è·å–æŒ‡å®šåŸŸåä¸‹çš„ cookies
    session.defaultSession.cookies.get({ domain: 'example.com' }, (error, cookies) => {
      if (error) throw error;
      console.log(cookies);
    });
    ```
    
    - `session.cookies.set(details, callback)`: åœ¨æŒ‡å®šä¼šè¯ä¸­è®¾ç½® cookieã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // åœ¨é»˜è®¤ä¼šè¯ä¸­è®¾ç½®ä¸€ä¸ª cookie
    session.defaultSession.cookies.set({
      url: 'http://example.com',
      name: 'my-cookie',
      value: 'hello',
      domain: '.example.com',
      path: '/',
      expires: -1,
      secure: false,
      httpOnly: true,
      sameSite: 'Strict'
    }, (error) => {
      if (error) console.error(error);
    });
    ```
    
3. **ç¼“å­˜ç®¡ç†**:
    
    - `session.clearCache(callback)`: æ¸…é™¤æŒ‡å®šä¼šè¯çš„ç¼“å­˜æ•°æ®ã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // æ¸…é™¤é»˜è®¤ä¼šè¯çš„ç¼“å­˜
    session.defaultSession.clearCache(() => {
      console.log('Cache cleared!');
    });
    ```
    
    - `session.clearStorageData(options, callback)`: æ¸…é™¤æŒ‡å®šä¼šè¯çš„å­˜å‚¨æ•°æ®(å¦‚ localStorageã€IndexedDB ç­‰)ã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // æ¸…é™¤é»˜è®¤ä¼šè¯çš„æ‰€æœ‰å­˜å‚¨æ•°æ®
    session.defaultSession.clearStorageData({}, (error) => {
      if (error) console.error(error);
      else console.log('Storage data cleared!');
    });
    ```
    
4. **ç½‘ç»œè¯·æ±‚æ‹¦æˆªå’Œè‡ªå®šä¹‰**:
    
    - `session.webRequest.onBeforeRequest(filter, listener)`: æ‹¦æˆªå¹¶è‡ªå®šä¹‰ç½‘ç»œè¯·æ±‚ã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // æ‹¦æˆªå¹¶è®°å½•æ‰€æœ‰ GET è¯·æ±‚
    session.defaultSession.webRequest.onBeforeRequest((details, callback) => {
      console.log('Intercepted request:', details.url);
      callback({ cancel: false }); // å…è®¸è¯·æ±‚ç»§ç»­
    });
    ```
    
    - `session.webRequest.onBeforeSendHeaders(filter, listener)`: åœ¨å‘é€ç½‘ç»œè¯·æ±‚å¤´ä¹‹å‰è¿›è¡Œä¿®æ”¹ã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // åœ¨å‘é€è¯·æ±‚å¤´ä¹‹å‰æ·»åŠ è‡ªå®šä¹‰å¤´éƒ¨
    session.defaultSession.webRequest.onBeforeSendHeaders((details, callback) => {
      details.requestHeaders['X-Custom-Header'] = 'my-value';
      callback({ requestHeaders: details.requestHeaders });
    });
    ```
    
5. **æƒé™ç®¡ç†**:
    
    - `session.setPermissionCheckHandler(handler)`: è®¾ç½®æƒé™æ£€æŸ¥å›è°ƒå‡½æ•°,ç”¨äºè‡ªå®šä¹‰æƒé™è¡Œä¸ºã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // æ‹¦æˆªå¹¶è‡ªå®šä¹‰æƒé™è¯·æ±‚
    session.defaultSession.setPermissionCheckHandler((webContents, permission, requestingOrigin) => {
      if (permission === 'notifications' && requestingOrigin === 'https://example.com') {
        return true; // å…è®¸é€šçŸ¥æƒé™è¯·æ±‚
      }
      return false; // æ‹’ç»å…¶ä»–æƒé™è¯·æ±‚
    });
    ```
    
6. **ä»£ç†é…ç½®**:
    
    - `session.setProxy(config, callback)`: è®¾ç½®ä»£ç†æœåŠ¡å™¨é…ç½®ã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // è®¾ç½®é»˜è®¤ä¼šè¯çš„ä»£ç†é…ç½®
    session.defaultSession.setProxy({
      proxyRules: 'http=localhost:8080;https=localhost:8080',
      proxyBypassRules: '<local>'
    }, () => {
      console.log('Proxy settings updated!');
    });
    ```
    
    - `session.resolveProxy(url, callback)`: è§£ææŒ‡å®š URL çš„ä»£ç†æœåŠ¡å™¨é…ç½®ã€‚
    
    javascript
    
    å¤åˆ¶
    
    ```
    // è§£æ URL çš„ä»£ç†é…ç½®
    session.defaultSession.resolveProxy('http://example.com', (proxy) => {
      console.log('Proxy for the URL:', proxy);
    });
    ```
    

è¿™å°±æ˜¯ Electron çš„Â `session`Â æ¨¡å—çš„ä¸€äº›ä¸»è¦åŠŸèƒ½å’Œä½¿ç”¨ç¤ºä¾‹ã€‚é€šè¿‡è¿™ä¸ªæ¨¡å—,å¼€å‘è€…å¯ä»¥éå¸¸ç»†ç²’åº¦åœ°æ§åˆ¶åº”ç”¨ç¨‹åºçš„ä¼šè¯è¡Œä¸º,ä»¥æ»¡è¶³å„ç§å¤æ‚çš„éœ€æ±‚ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•å…¶ä»–é—®é¢˜,æ¬¢è¿éšæ—¶é—®æˆ‘ã€‚
## 1.3. è‡ªæˆ‘é‡è¿°

_ç”¨è‡ªå·±çš„è¯å»é‡è¿°æå–çš„é‡ç‚¹å†…å®¹_

- [ ] å¾…åŠç¤ºä¾‹ 2024å¹´05æœˆ27æ—¥
	- [x] ã€ä¸´æ—¶æ€§é¡¹ç›®ä»»åŠ¡-æ•™è‚²æ¡Œé¢äº‘&å¤šåª’ä½“&lissã€‘é•¿æ²™å¹¼å„¿å¸ˆèŒƒé«˜ç­‰ä¸“ç§‘å­¦æ ¡ä¿¡å·¥é™¢é¡¹ç›®äºŒæ¬¡ä¿®æ”¹
	- [ ] 

^todo

## 1.4. é‡ç‚¹æ‘˜æŠ„

_æ‘˜æŠ„éƒ¨åˆ†åŸæ–‡åï¼Œè¿›è¡Œç­›é€‰åŠ ç²—ç„¶åå¯¹åŠ ç²—çš„ç»§ç»­è¿›è¡Œç­›é€‰è§å…‰ç¬”é€‰å‡ºã€‚_

### 1.4.1. äº‹ä»¶

_è®°å½•å½“å¤©å‡ºç°çš„äº‹ä»¶_

**[[2024å¹´05æœˆ27æ—¥]]äº‹ä»¶** 
#è·Ÿè¸ª #é‡è¦ #è®°å½• #å®˜æ–¹æ–‡æ¡£ #è®°å½•åšå®¢ #å­¦ä¹ çŸ¥è¯†ç‚¹ #è®¡åˆ’ä»»åŠ¡ #è¿œç¨‹ååŠ© #ä¼šè®® #ç®¡ç†ä»»åŠ¡
#é‡è¦ `Transfer-Encoding:chunked; `
#é‡è¦ sessionï¼š[Electron ä¼šè¯ç®¡ç† - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7246671793032331320)
#é‡è¦ electronæŒä¹…åŒ–cookieçš„æ–¹æ³•ï¼Œä»sessionä¸­è·å–ï¼š[electronæŒä¹…åŒ–cookieçš„æ–¹æ³•ï¼Œä»sessionä¸­è·å–_election cookies-CSDNåšå®¢](https://blog.csdn.net/weixin_45756789/article/details/134754814)

^event

#### 1.4.1.1. æ¯æ—¥å·¥æ—¶

_è®°å½•ç¦…é“å·¥æ—¶ï¼Œæœ€ç»ˆæ‘˜æŠ„åˆ°ç¦…é“_
**[[2024å¹´05æœˆ27æ—¥]]å·¥æ—¶**
- [ ] 08:30 - 09:30 #å·¥æ—¶  1h BugÂ [#58230 ã€6.0.1èµ„æºç®¡ç†é—¨æˆ·/æ¨¡æ¿ã€‘ã€åŠŸèƒ½å›é€€ã€‘ã€å¿…ç°ã€‘æ¨¡æ¿æ–‡ä»¶ä¸‹è½½ä¸ç”Ÿæ•ˆ](http://172.16.203.12/zentao/bug-view-58230.html?onlybody=yes)|****
- [ ] 09:30 - 10:30 #å·¥æ—¶  1h BugÂ [#58406 ã€6.0.1èµ„æºç®¡ç†é—¨æˆ·/èµ„æº/ä¸»æ§ç®¡ç†ã€‘ã€æµ‹è¯•1æ¬¡å‡ºç°1æ¬¡ã€‘åˆ†å¸ƒå¼å­˜å‚¨ç»“åˆä¸»æ§haç¯å¢ƒï¼Œè§¦å‘è£‚è„‘ç•Œé¢ï¼Œå¯¹åº”èŠ‚ç‚¹æ¨èæ ‡è¯†æ˜¾ç¤ºä¸ç¾è§‚ï¼ŒåŒé‡æ˜¾ç¤ºå¯¼è‡´é‡å½±](http://172.16.203.12/zentao/bug-view-58406.html?onlybody=yes)|****
- [ ] 10:30 - 12:00 #å·¥æ—¶  1.5h BugÂ [#58453 ã€6.0.1èµ„æºç®¡ç†é—¨æˆ·/èµ„æº/ä¸»æ§ç®¡ç†ã€‘ã€æµ‹è¯•1æ¬¡å‡ºç°1æ¬¡ã€‘åˆ†å¸ƒå¼å­˜å‚¨ç»“åˆä¸»æ§haç¯å¢ƒï¼Œç¦ç”¨ä¸»æ§haä¼šä¸€ç›´æŠ¥é”™19999](http://172.16.203.12/zentao/bug-view-58453.html?onlybody=yes)
- [ ] 14:00 - 17:30 #å·¥æ—¶  1.5h ä»»åŠ¡Â [#52300 Tspaceå®¢æˆ·ç«¯å‰ç«¯-åº•å±‚æ¥å£è°ƒç”¨ç­‰](http://172.16.203.12/zentao/task-view-52300.html?onlybody=yes)

^time

æœ¬å‘¨è®°å½•ï¼š[[2024å¹´ç¬¬22å‘¨è®°å½•]]

# 2. ç›¸å…³æ–‡ç« 

_æ‘˜æŠ„æ¥æºï¼Œå¼•ç”¨å‡ºå¤„ï¼Œå‚è€ƒé“¾æ¥ï¼Œæ–‡æ¡£æŸ¥è¯¢_

Page Link::
1. electroné—®é¢˜é›†åˆï¼š
	1. [electronæŒä¹…åŒ–cookieçš„æ–¹æ³•ï¼Œä»sessionä¸­è·å–_election cookies-CSDNåšå®¢](https://blog.csdn.net/weixin_45756789/article/details/134754814)
	2. [Electron ä¼šè¯ç®¡ç† - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7246671793032331320)
	3. [electron-cn-docs/api/session.md at master Â· amhoho/electron-cn-docs (github.com)](https://github.com/amhoho/electron-cn-docs/blob/master/api/session.md)
	4. [Electronç¬¬äºŒç¯‡--è¿›ç¨‹é€šä¿¡ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6969928912386293773)
	5. [ä¼šè¯ | Electronä¸­æ–‡æ‰‹å†Œ (gitbook.io)](https://yuzhigang5460.gitbook.io/electron/api/api-jie-kou-zhi-zhu-jin-cheng-jie-kou/cookies)
	
^url
