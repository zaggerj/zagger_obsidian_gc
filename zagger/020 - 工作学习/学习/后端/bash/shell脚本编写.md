---
aliases: 
tags:
  - é•¿é’ç¬”è®°
cdate: 2024-01-03 16:44
uid: 20240103164437
searchterm: "#é•¿é’ç¬”è®°"
banner: 040 - Obsidian/é™„ä»¶/banners/book-banner.gif
cssclasses:
  - noyaml
banner_icon: ğŸ’Œ
banner_x: -1
banner_y: 0.38
---

# 1. shellè„šæœ¬ç¼–å†™

## 1.1. Metadata

Status:: #ç¬”è®°çŠ¶æ€/ğŸŒ± å‘èŠ½
Source Type:: #ğŸ“¥/ğŸ’­ æƒ³æ³• 
Note Type:: #ç¬”è®°
Topic:: [[00.å­¦ä¹ -å‰ç«¯]]
Author:: zagger
Source URL::
Modify:: 2024-01-03 æ˜ŸæœŸä¸‰ 16:44:35

## 1.2. é•¿é’ç¬”è®°

_ä¸€å¥è¯æ¦‚æ‹¬è¿™ç¯‡ç¬”è®°çš„å†…å®¹_
Summary::

## 1.3. è‡ªæˆ‘é‡è¿°

_ç”¨è‡ªå·±çš„è¯å»é‡è¿°æå–çš„é‡ç‚¹å†…å®¹_

## 1.4. é‡ç‚¹æ‘˜æŠ„

_æ‘˜æŠ„éƒ¨åˆ†åŸæ–‡åï¼Œè¿›è¡Œç­›é€‰åŠ ç²—ç„¶åå¯¹åŠ ç²—çš„ç»§ç»­è¿›è¡Œç­›é€‰è§å…‰ç¬”é€‰å‡ºã€‚_


> ä½œè€…ï¼šèƒ¡æµ·
>
> æ—¥æœŸï¼š2024 å¹´ 1 æœˆ 3 æ—¥


# 2. åˆ†äº« - shellè„šæœ¬ç¼–å†™

/

## 2.1. æ“ä½œ 

### 2.1.1. :-


`${var:-default}` å¦‚æœå˜é‡ var æœªå®šä¹‰æˆ–ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ defaultã€‚


```bash
echo "a: ${a:-v}"   # è¾“å‡ºï¼ša: v
a=""
echo "a: ${a:-v}"   # è¾“å‡ºï¼ša: v
echo "a: ${a}"    # è¾“å‡ºï¼ša:


```


### 2.1.2. -


`${var-default}` å¦‚æœå˜é‡ var æœªå®šä¹‰ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ defaultã€‚


```bash
echo "a: ${a-v}"    # è¾“å‡ºï¼ša: v
a=""
echo "a: ${a-v}"    # è¾“å‡ºï¼ša:
echo "a: ${a}"    # è¾“å‡ºï¼ša:
```


### 2.1.3. :=


`${var:=default}` å¦‚æœå˜é‡ var æœªå®šä¹‰æˆ–ä¸ºç©ºï¼Œåˆ™è®¾ç½®ä¸ºé»˜è®¤å€¼ defaultã€‚


```bash
echo "a: ${a:=v}"   # è¾“å‡ºï¼ša: v
echo "a: ${a}"    # è¾“å‡ºï¼ša: v
a=""
echo "a: ${a:=v}"   # è¾“å‡ºï¼ša: v
echo "a: ${a}"    # è¾“å‡ºï¼ša: v


```


> æ³¨æ„è¿™é‡Œä¼šæ”¹å˜å˜é‡çš„å€¼ï¼ŒåŒ `:-` è¿›è¡ŒåŒºåˆ†


### 2.1.4. :+


`${var:+value}` å¦‚æœå˜é‡ var å·²å®šä¹‰ä¸”éç©ºï¼Œåˆ™ä½¿ç”¨å€¼ valueã€‚


```bash
echo "a:+v: ${a:+v}"  # è¾“å‡ºï¼ša+v:
a="1"
echo "a:+v: ${a:+v}"  # è¾“å‡ºï¼ša+v: v
a=""
echo "a:+v: ${a:+v}"  # è¾“å‡ºï¼ša+v:
```


### 2.1.5. +


`${var+value}` å¦‚æœå˜é‡ var å·²å®šä¹‰ï¼Œåˆ™ä½¿ç”¨å€¼ valueã€‚


```bash
echo "a+v: ${a+v}"  # è¾“å‡ºï¼ša+v:
a="1"
echo "a+v: ${a+v}"  # è¾“å‡ºï¼ša+v: v
a=""
echo "a+v: ${a+v}"  # è¾“å‡ºï¼ša+v: v


```


### 2.1.6. :?


`${var:?message}` å¦‚æœå˜é‡ var æœªå®šä¹‰æˆ–ä¸ºç©ºï¼Œåˆ™è¾“å‡ºé”™è¯¯ä¿¡æ¯ message å¹¶ç»ˆæ­¢è„šæœ¬ã€‚


```bash
echo "a:+v: ${a:?message}"  # è¾“å‡ºï¼šbash: a: message
a=""
echo "a:+v: ${a:?message}"
a="1"
echo "a:+v: ${a:?message}"
```


> è¿™é‡Œè„šæœ¬æœªæŒ‰ç…§é¢„æœŸè¾“å‡ºï¼Œæ˜¯å› ä¸ºå˜é‡ a æœªå®šä¹‰æˆ–ä¸ºç©ºï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯ message å¹¶ç»ˆæ­¢è„šæœ¬


æˆ‘ä»¬å¯¹è„šæœ¬è¿›è¡Œä¿®æ”¹ï¼Œä½¿ç”¨æ‹¬å·å°†è„šæœ¬æ‹¬èµ·æ¥ï¼Œè¿™æ ·è„šæœ¬ä¼šåœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œï¼Œå¹¶ä¸ä¼šå½±å“çˆ¶è¿›ç¨‹çš„æ‰§è¡Œã€‚


```bash
( echo "a:?msg: ${a:?message}" )  # è¾“å‡ºï¼šbash: a: message
a=""
( echo "a:?msg: ${a:?message}" )  # è¾“å‡ºï¼šbash: a: message
a="1"
echo "a:?msg: ${a:?message}"      # è¾“å‡ºï¼ša:?msg: message
```


### 2.1.7. ?


`${var?message}` å¦‚æœå˜é‡ var æœªå®šä¹‰ï¼Œåˆ™è¾“å‡ºé”™è¯¯ä¿¡æ¯ message å¹¶ç»ˆæ­¢è„šæœ¬ã€‚


```bash
( echo "a?msg: ${a?message}" )  # è¾“å‡ºï¼šbash: a: message
a=""
( echo "a?msg: ${a?message}" )  # è¾“å‡ºï¼šbash: a: message
a="1"
echo "a?msg: ${a?message}"  # è¾“å‡ºï¼ša:+v: 1
```


æ€»ç»“


![](http://192.168.0.161:4999/server/index.php?s=/api/attachment/visitFile&sign=f3af0c5ecd8778813fd695c33d1261a0)


## 2.2. å˜é‡


### 2.2.1. å®šä¹‰


åœ¨ Shell è„šæœ¬ä¸­ï¼Œå˜é‡ç”¨äºå­˜å‚¨æ•°æ®ï¼Œå¹¶é€šè¿‡å˜é‡åè¿›è¡Œè®¿é—®ã€‚å˜é‡çš„å®šä¹‰ä¸éœ€è¦æŒ‡å®šæ•°æ®ç±»å‹ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼ã€‚


ç›´æ¥èµ‹å€¼


```bash
variable_name=value
```


ä½¿ç”¨ read å‘½ä»¤ä»ç”¨æˆ·è¾“å…¥è·å–å€¼


```bash
read -p "Enter your name: " name<<<"aaa"
echo $name  # è¾“å‡º: aaa
```


> read -p "Enter your name: " name ä¼šç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œå¹¶å°†è¾“å…¥çš„å€¼èµ‹ç»™å˜é‡ nameã€‚è€Œ <<< "aaa" å°†å­—ç¬¦ä¸² "aaa" ä¼ é€’ç»™ read å‘½ä»¤ï¼Œå……å½“ç”¨æˆ·çš„è¾“å…¥


å‘½ä»¤è¾“å‡ºèµ‹å€¼


```bash
result=$(command)


```


é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’


```bash
# åœ¨è„šæœ¬ä¸­ä½¿ç”¨ $1, $2, ... è·å–ä¼ é€’çš„å‚æ•°
variable=$1
```


ç¯å¢ƒå˜é‡èµ‹å€¼


```bash
export MY_VARIABLE="Hello World"


```


æ•°ç»„èµ‹å€¼


```bash
# æ•°ç»„çš„å®šä¹‰ä¸èµ‹å€¼
my_array=(value1 value2 value3)
```


### 2.2.2. ç‰¹æ®Šå˜é‡


$0: å½“å‰è„šæœ¬çš„æ–‡ä»¶åã€‚
$1, $2, ...: è„šæœ¬æˆ–å‡½æ•°çš„å‚æ•°ã€‚
$#: å‚æ•°çš„æ•°é‡ã€‚
$@: æ‰€æœ‰å‚æ•°çš„åˆ—è¡¨ã€‚
$?: ä¸Šä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚
$$: å½“å‰è„šæœ¬çš„è¿›ç¨‹ IDã€‚


```bash
function foo() {


    echo "\$0: $0"
    echo "\$1: $1"
    echo "\$#: $#"
    echo "\$*: $*"
    echo "\$@: $@"
    echo "\$?: $?"
    echo "\$$: $$"
    printf "%s\n" "$@" | awk '{print NR,$0}'


}
foo 1 2 3 "4 5"


```


### å˜é‡çš„ä¿®æ”¹


é€šè¿‡é‡æ–°èµ‹å€¼å¯ä»¥ä¿®æ”¹å˜é‡çš„å€¼ã€‚


### åˆ é™¤å˜é‡


ä½¿ç”¨ unset å‘½ä»¤å¯ä»¥åˆ é™¤å˜é‡ã€‚


```bash
a=1
echo "a:${a?}"
unset a
echo "a:${a?a is not defined}"
```


## ä½œç”¨åŸŸ


å˜é‡çš„ä½œç”¨åŸŸæŒ‡çš„æ˜¯å˜é‡åœ¨ç¨‹åºä¸­å¯è§å’Œå¯è®¿é—®çš„èŒƒå›´ã€‚åœ¨ Shell è„šæœ¬ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ç§å˜é‡ä½œç”¨åŸŸï¼šå…¨å±€ä½œç”¨åŸŸå’Œå±€éƒ¨ä½œç”¨åŸŸã€‚


### å…¨å±€å˜é‡


å…¨å±€ä½œç”¨åŸŸçš„å˜é‡åœ¨æ•´ä¸ªè„šæœ¬ä¸­éƒ½æ˜¯å¯è§å’Œå¯è®¿é—®çš„ï¼ŒåŒ…æ‹¬è„šæœ¬çš„æ‰€æœ‰å‡½æ•°ã€‚å…¨å±€å˜é‡é€šå¸¸åœ¨è„šæœ¬çš„æœ€å¤–å±‚å®šä¹‰ï¼Œå¹¶å¯ä»¥è¢«è„šæœ¬ä¸­çš„ä»»ä½•åœ°æ–¹å¼•ç”¨ã€‚


```bash
# å…¨å±€å˜é‡
global_variable="I am global"


function my_function {
  echo "Inside function: $global_variable"
}


# åœ¨å‡½æ•°å¤–è®¿é—®å…¨å±€å˜é‡
echo "Outside function: $global_variable"


# è°ƒç”¨å‡½æ•°
my_function
```


åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ `global_variable` æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå¯ä»¥åœ¨å‡½æ•°å†…å¤–è¢«å¼•ç”¨ã€‚


### å±€éƒ¨å˜é‡


å±€éƒ¨ä½œç”¨åŸŸçš„å˜é‡ä»…åœ¨å…¶è¢«å®šä¹‰çš„å—ï¼ˆé€šå¸¸æ˜¯å‡½æ•°ï¼‰ä¸­å¯è§ã€‚ä¸€æ—¦ç¦»å¼€è¿™ä¸ªå—ï¼Œå˜é‡å°±è¶…å‡ºäº†ä½œç”¨åŸŸï¼Œæ— æ³•å†è¢«å¼•ç”¨ã€‚


```bash
function my_function {
  # å±€éƒ¨å˜é‡
  local local_variable="I am local"
  echo "Inside function: $local_variable"
}


# åœ¨å‡½æ•°å¤–å°è¯•è®¿é—®å±€éƒ¨å˜é‡ï¼ˆä¼šæŠ¥é”™ï¼‰
echo "Outside function: $local_variable"


# è°ƒç”¨å‡½æ•°
my_function
```


åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ `local_variable` æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œåªèƒ½åœ¨ `my_function` å‡½æ•°å†…éƒ¨è¢«å¼•ç”¨ã€‚åœ¨å‡½æ•°å¤–éƒ¨è®¿é—®å®ƒä¼šå¯¼è‡´é”™è¯¯ã€‚


### ç¯å¢ƒå˜é‡


ç¯å¢ƒå˜é‡å…·æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œå¯ä»¥åœ¨æ•´ä¸ª Shell ä¼šè¯ä¸­è®¿é—®ã€‚åœ¨ä¸€ä¸ª Shell è„šæœ¬ä¸­è®¾ç½®çš„ç¯å¢ƒå˜é‡åœ¨è„šæœ¬æ‰§è¡Œç»“æŸåä»ç„¶ä¿æŒæœ‰æ•ˆï¼Œå› ä¸ºå®ƒä»¬å­˜åœ¨äº Shell çš„ç¯å¢ƒä¸­ã€‚


```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export MY_VARIABLE="I am an environment variable"
# åœ¨è„šæœ¬ä¸­è®¿é—®ç¯å¢ƒå˜é‡
echo "Inside script: $MY_VARIABLE"


# æ‰§è¡Œå¦ä¸€ä¸ªè„šæœ¬
./another_script.sh
```


åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ `MY_VARIABLE` æ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå¯ä»¥åœ¨è„šæœ¬ä¸­å’Œå…¶ä»–é€šè¿‡è¯¥è„šæœ¬å¯åŠ¨çš„è„šæœ¬ä¸­è®¿é—®ã€‚


æ€»ä½“è€Œè¨€ï¼Œäº†è§£å˜é‡çš„ä½œç”¨åŸŸæœ‰åŠ©äºç¼–å†™æ›´æ¸…æ™°ã€å¯ç»´æŠ¤çš„ä»£ç ã€‚*å…¨å±€å˜é‡*é€‚ç”¨äºéœ€è¦åœ¨æ•´ä¸ªè„šæœ¬ä¸­å…±äº«çš„æ•°æ®ï¼Œè€Œ*å±€éƒ¨å˜é‡*é€‚ç”¨äºåªåœ¨æŸä¸ªå‡½æ•°æˆ–ä»£ç å—å†…éƒ¨ä½¿ç”¨çš„æ•°æ®ï¼Œå¯ä»¥æœ‰æ•ˆåœ°æ§åˆ¶å˜é‡çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚


## å­—ç¬¦ä¸²


### å®šä¹‰


 `S="abcdeabcde"`


### é•¿åº¦



![](http://192.168.0.161:4999/server/index.php?s=/api/attachment/visitFile&sign=44df70772c75b730560baa50e7394bd9)


```bash
S="abcdeabcde"
echo "len: ${#S}"
```


### åˆ‡ç‰‡


åœ¨ Shell è„šæœ¬ä¸­ï¼Œå­—ç¬¦ä¸²åˆ‡ç‰‡æ˜¯ä¸€ç§ä»å­—ç¬¦ä¸²ä¸­æå–å­å­—ç¬¦ä¸²çš„æ“ä½œã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¯­æ³•è¿›è¡Œå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼š


 `${string:offset:length}`


* `string` æ˜¯è¦è¿›è¡Œåˆ‡ç‰‡çš„å­—ç¬¦ä¸²ã€‚
* `offset` æ˜¯ä»å“ªä¸ªä½ç½®å¼€å§‹åˆ‡ç‰‡ï¼Œç´¢å¼•ä» 0 å¼€å§‹ã€‚
* `length` æ˜¯è¦åˆ‡ç‰‡çš„å­—ç¬¦æ•°ã€‚



![](http://192.168.0.161:4999/server/index.php?s=/api/attachment/visitFile&sign=1b81ea79463b79c939dc75e34fc72e7d)


> åœ¨ Shell ä¸­ï¼Œè´Ÿæ•°ç´¢å¼•æ˜¯ä»å­—ç¬¦ä¸²çš„æœ«å°¾å‘å‰æ•°çš„ã€‚è´Ÿæ•°ç´¢å¼•ä» `-1` å¼€å§‹ ( `-0` å¹¶ä¸è¡¨ç¤ºä»å­—ç¬¦ä¸²æœ«å°¾å‘å‰æ•°çš„ç¬¬ 0 ä¸ªå­—ç¬¦ï¼Œè€Œæ˜¯ä»å­—ç¬¦ä¸²å¼€å¤´çš„ç¬¬ 0 ä¸ªå­—ç¬¦ï¼Œå› ä¸ºåœ¨æ•°å­¦ä¸Š `-0` ä¸ `0` æ˜¯ç›¸åŒçš„ï¼‰ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ `-2` è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ­£æ•°ç´¢å¼•ä» `0` å¼€å§‹ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚


```bash
S="abcdeABCDE"


echo "\${S:5}:     ${S:5}"
echo "\${S:5:4}:   ${S:5:4}"
echo "\${S:0-5}:   ${S:0-5}"
echo "\${S:0-5:4}: ${S:0-5:4}"
```


> è¿™é‡Œéœ€è¦æ³¨æ„å¦‚æœä»å­—ç¬¦ä¸²å°¾éƒ¨å¼€å§‹åˆ‡ç‰‡ï¼Œç´¢å¼•éœ€è¦è¡¨ç¤ºä¸º0-xè€Œä¸æ˜¯-x


```bash
S="abcdeABCDE"


echo "\${S:-5}:    ${S:-5}"
echo "\${S:-5:4}:  ${S:-5:4}"
```


### æˆªå–



![](http://192.168.0.161:4999/server/index.php?s=/api/attachment/visitFile&sign=fb2356885e30f4e9f572c2a6711f6f88)


```bash
S="abcdeabcde"


echo "\${S#abc}:     ${S#abc}"
echo "\${S#*bc}:     ${S#*bc}"
cho "\${S##*bc}:    ${S##*bc}" # è´ªå©ªåŒ¹é…
```



![](http://192.168.0.161:4999/server/index.php?s=/api/attachment/visitFile&sign=3d351bbddddb84b038d2668c4cdce18f)


```bash
S="abcdeabcde"


echo "\${S%cde}:     ${S%cde}"
echo "\${S%cd*}:     ${S%cd*}"
echo "\${S%%cd*}:    ${S%%cd*}" # è´ªå©ªåŒ¹é…
```


### æ›¿æ¢


![](http://192.168.0.161:4999/server/index.php?s=/api/attachment/visitFile&sign=166a0b6d0e0016c974e3fb85aae9e64d)

```bash
S="abcdeabcde"


echo "\${S/abc/ABC}:   ${S/abc/ABC}"
echo "\${S//abc/ABC}:  ${S//abc/ABC}"
echo "\${S/#abc/ABC}:  ${S/#abc/ABC}"  # å‰ç¼€åŒ¹é…
echo "\${S/%cde/CDE}:  ${S/%cde/CDE}"  # åç¼€åŒ¹é…
echo "\${S/*bc/BC}:    ${S/*bc/BC}"
echo "\${S/bc*/BC}:    ${S/bc*/BC}"
```


### è½¬æ¢å¤§å°å†™


```bash
S="abcdeABCDE"


echo "\${S,,}:  ${S,,}"
echo "\${S^^}:  ${S^^}"
```


## åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰


åˆ—è¡¨é€šå¸¸è¢«ç§°ä¸ºæ•°ç»„ã€‚æ•°ç»„æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå¯ä»¥å­˜å‚¨å¤šä¸ªå€¼ï¼Œå¹¶ä½¿ç”¨ç´¢å¼•æˆ–é”®ï¼ˆå…³è”æ•°ç»„ï¼‰è¿›è¡Œè®¿é—®ã€‚


### å®šä¹‰


```bash


# ä½¿ç”¨ç©ºæ ¼åˆ†éš”çš„å€¼å®šä¹‰æ•°ç»„


my_array=("value1" "value2" "value3")


# æˆ–è€…é€ä¸ªèµ‹å€¼


my_array[0]="value1"
my_array[1]="value2"
my_array[2]="value3"
```


### è®¿é—®


ä½¿ç”¨ç´¢å¼•è®¿é—®æ•°ç»„å…ƒç´ 


```bash
echo ${my_array[0]}  # è¾“å‡ºï¼švalue1
echo ${my_array[1]}  # è¾“å‡ºï¼švalue2
echo ${my_array[2]}  # è¾“å‡ºï¼švalue3
```


### é•¿åº¦


ä½¿ç”¨ # å¯ä»¥è·å–æ•°ç»„çš„é•¿åº¦


```bash
length=${#my_array[@]}
echo $length  # è¾“å‡ºï¼š3
```


### éå†


```bash
# éå†æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ 
for item in "${my_array[@]}"; do
  echo $item
done
```


## å­—å…¸ï¼ˆå…³è”æ•°ç»„ï¼‰


å…³è”æ•°ç»„ä½¿ç”¨å­—ç¬¦ä¸²é”®è€Œä¸æ˜¯æ•°å­—ç´¢å¼•ã€‚å…³è”æ•°ç»„åœ¨ Bash ç‰ˆæœ¬ 4 åŠä»¥ä¸Šå¯ç”¨ã€‚


åœ¨ Shell ç¼–ç¨‹ä¸­ï¼Œæ²¡æœ‰ç›´æ¥ç§°ä¹‹ä¸º â€œå­—å…¸â€ çš„æ•°æ®ç»“æ„ã€‚Shell ä¸­é€šå¸¸ä½¿ç”¨å…³è”æ•°ç»„æ¥å®ç°ç±»ä¼¼å­—å…¸çš„åŠŸèƒ½ã€‚å…³è”æ•°ç»„å…è®¸ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºé”®ï¼Œå¹¶ä¸æ¯ä¸ªé”®ç›¸å…³è”ä¸€ä¸ªå€¼ã€‚


### å®šä¹‰


```bash
# ä½¿ç”¨ -A é€‰é¡¹å®šä¹‰å…³è”æ•°ç»„


declare -A dict=([key1]="value1" [key2]="value2" [key3]="value3")
```


### è®¿é—®


```bash
declare -A dict=([key1]="value1" [key2]="value2" [key3]="value3")


# ä½¿ç”¨é”®è®¿é—®å…³è”æ•°ç»„å…ƒç´ 
echo ${dict["key1"]}  # è¾“å‡ºï¼švalue1
echo ${dict["key2"]}  # è¾“å‡ºï¼švalue2
echo ${dict["key3"]}  # è¾“å‡ºï¼švalue3
```


### éå†


```bash
declare -A dict=([key1]="value1" [key2]="value2" [key3]="value3")


# éå†å…³è”æ•°ç»„ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹


for key in "${!dict[@]}"; do
  echo "Key: $key, Value: ${dict[$key]}"
done
```


### è·å–æ‰€æœ‰æ•°ç»„å…ƒç´ 


```bash
declare -A dict=([key1]="value1" [key2]="value2" [key3]="value3")


# ä½¿ç”¨ @ æˆ– * è·å–æ‰€æœ‰æ•°ç»„å…ƒç´ 
all_elements="${dict[@]}"
echo $all_elements  # è¾“å‡ºï¼švalue1 value2 value3
```


### è·å–æ‰€æœ‰å…³è”æ•°ç»„çš„é”®


```bash
declare -A dict=([key1]="value1" [key2]="value2" [key3]="value3")


# ä½¿ç”¨ ! è·å–æ‰€æœ‰å…³è”æ•°ç»„çš„é”®


all_keys="${!dict[@]}"
echo $all_keys  # è¾“å‡ºï¼škey1 key2 key3
```


## æµç¨‹æ§åˆ¶


### æ¡ä»¶è¯­å¥


`if` è¯­å¥ç”¨äºæ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚


`


```bash
if [ condition ]; then
  # ä»£ç å—1
elif [ another_condition ]; then
  # ä»£ç å—2
else
  # ä»£ç å—3
fi
````


### å¾ªç¯è¯­å¥


#### forå¾ªç¯


`for` å¾ªç¯ç”¨äºæŒ‰é¡ºåºè¿­ä»£ä¸€ç»„å€¼ã€‚


`


```bash
for variable in value1 value2 value3; do
  # å¾ªç¯ä½“
done
````


ç¤ºä¾‹ï¼š


`


```bash
# éå†åˆ—è¡¨
fruits=("apple" "orange" "banana")
for fruit in "${fruits[@]}"; do
  echo "I like $fruit"
done


# éå†æ•°å­—èŒƒå›´
for number in {1..5}; do
  echo "Number: $number"
done


# ä½¿ç”¨ seq å‘½ä»¤éå†æ•°å­—èŒƒå›´ï¼ˆseq å‘½ä»¤ç”¨äºç”Ÿæˆæ•°å­—åºåˆ—ï¼‰
for number in $(seq 1 2 10); do
  echo "Number: $number"
done


# åµŒå¥—å¾ªç¯
for (( i = 1; i <= 3; i++ )); do
  echo "Outer loop: $i"
  for (( j = 1; j <= 4; j+=2 )); do
    echo "  Inner loop: $j"
  done
done
````


#### while å¾ªç¯


`while` å¾ªç¯ç”¨äºåœ¨æ¡ä»¶ä¸ºçœŸæ—¶é‡å¤æ‰§è¡Œä»£ç å—ã€‚


`


```bash
while [ condition ]; do
  # å¾ªç¯ä½“
done
````


#### è·³å‡ºå¾ªç¯


##### break


`break` è¯­å¥ç”¨äºç«‹å³è·³å‡ºå¾ªç¯ã€‚


```
while [ condition ]; do
  # å¾ªç¯ä½“
  if [ another_condition ]; then
    break
  fi
done
```


##### continue


`continue` è¯­å¥ç”¨äºç»“æŸå½“å‰å¾ªç¯è¿­ä»£ï¼Œç«‹å³è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚


```
while [ condition ]; do
  # å¾ªç¯ä½“
  if [ another_condition ]; then
    continue
  fi
  # ä»¥ä¸‹ä»£ç åœ¨ another_condition ä¸æ»¡è¶³æ—¶æ‰§è¡Œ
done
```


### é€‰æ‹©è¯­å¥


#### case è¯­å¥


`case` è¯­å¥ç”¨äºæ ¹æ®ä¸åŒçš„æ¨¡å¼ï¼ˆpatternsï¼‰åŒ¹é…æ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚åœ¨è¿™ä¸ªç»“æ„ä¸­ï¼Œ `$variable` çš„å€¼å°†è¢«é€ä¸ªä¸æ¯ä¸ªæ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…æˆåŠŸï¼Œå¯¹åº”çš„ä»£ç å—å°†è¢«æ‰§è¡Œã€‚


```bash
case $variable in
  pattern1)
    # ä»£ç å—1
    ;;
  pattern2)
    # ä»£ç å—2
    ;;
  *)
    # é»˜è®¤ä»£ç å—
    ;;
esac
```


ä»¥ä¸‹æ˜¯å…³äº `case` è¯­å¥ä¸­æ¨¡å¼


#### åŸºæœ¬æ¨¡å¼


åœ¨ `case` è¯­å¥ä¸­ï¼Œæ¨¡å¼å¯ä»¥æ˜¯ç®€å•çš„å­—ç¬¦ä¸²ï¼Œå¦‚ï¼š


`


```bash
case $fruit in
  "apple")
    echo "It's an apple."
    ;;
  "orange")
    echo "It's an orange."
    ;;
  *)
    echo "It's something else."
    ;;
esac


````


#### é€šé…ç¬¦æ¨¡å¼


`case` è¯­å¥æ”¯æŒé€šé…ç¬¦æ¨¡å¼ï¼Œä½¿ç”¨ `*` è¡¨ç¤ºåŒ¹é…ä»»æ„å­—ç¬¦ï¼Œ `?` è¡¨ç¤ºåŒ¹é…å•ä¸ªå­—ç¬¦ï¼š


`


```bash
case $file in
  *.txt)
    echo "Text file."
    ;;
  image?.png)
    echo "Image file with a single-character identifier."
    ;;
  *)
    echo "Other type of file."
    ;;
esac
````


#### æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼


åœ¨ `case` è¯­å¥ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `~` è¿ç®—ç¬¦è¿›è¡Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼š


`


```bash
case $input in
  [0-9])
    echo "Single digit."
    ;;
  [a-z])
    echo "Lowercase letter."
    ;;
  [A-Z])
    echo "Uppercase letter."
    ;;
  *)
    echo "Other input."
    ;;
esac
````


#### å¤šä¸ªæ¨¡å¼å…±äº«ä»£ç å—


å¦‚æœå¤šä¸ªæ¨¡å¼éœ€è¦æ‰§è¡Œç›¸åŒçš„ä»£ç å—ï¼Œå¯ä»¥åœ¨ä¸€èµ·åˆ—å‡ºå®ƒä»¬ï¼š


`


```bash
case $day in
  "Monday" | "Wednesday" | "Friday")
    echo "It's a work day."
    ;;
  "Saturday" | "Sunday")
    echo "It's a weekend."
    ;;
  *)
    echo "It's some other day."
    ;;
esac
````


`case` è¯­å¥ä¸­çš„æ¨¡å¼æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥åŒ¹é…å’Œå¤„ç†ä¸åŒçš„æƒ…å†µï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„åŒ¹é…æ–¹å¼ã€‚åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œæ ¹æ®å…·ä½“çš„éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„æ¨¡å¼æ˜¯å¾ˆé‡è¦çš„ã€‚


## å‡½æ•°


å‡½æ•°æ˜¯ä¸€ç»„å‘½ä»¤çš„æœ‰åºé›†åˆï¼Œç”¨äºå®Œæˆç‰¹å®šçš„ä»»åŠ¡ã€‚å‡½æ•°æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯é‡ç”¨æ€§ã€‚


### å®šä¹‰


åœ¨ Shell ä¸­ï¼Œå‡½æ•°å¯ä»¥ä½¿ç”¨ `function` å…³é”®å­—ï¼Œä¹Ÿå¯ä»¥çœç•¥ã€‚å‡½æ•°çš„å®šä¹‰é€šå¸¸ä½äºè„šæœ¬çš„é¡¶éƒ¨æˆ–ä»»ä½•éœ€è¦è°ƒç”¨å‡½æ•°çš„ä½ç½®ã€‚


```bash


# ä½¿ç”¨ function å…³é”®å­—


function my_function {
  # å‡½æ•°ä½“
  echo "Hello World!"
}


# æˆ–è€…çœç•¥ function å…³é”®å­—


another_function() {
  # å‡½æ•°ä½“
  echo "Hello another world!"
}


```


### è°ƒç”¨


è°ƒç”¨å‡½æ•°æ—¶ï¼Œåªéœ€ä½¿ç”¨å‡½æ•°åå³å¯ï¼š


```bash
my_function       # è°ƒç”¨ç¬¬ä¸€ä¸ªå‡½æ•°
another_function    # è°ƒç”¨ç¬¬äºŒä¸ªå‡½æ•°
```


### å‚æ•°


å‡½æ•°å¯ä»¥æ¥å—å‚æ•°ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œä½¿ç”¨ `$1` , `$2` , ... æ¥å¼•ç”¨ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼š


```bash
function hello {
  echo "Hello, $1!"
}
hello "World"


```


### è¿”å›å€¼


å‡½æ•°å¯ä»¥é€šè¿‡ `return` è¯­å¥è¿”å›ä¸€ä¸ªå€¼ã€‚è¿”å›å€¼å¯ä»¥é€šè¿‡ `$?` æ¥è·å–ã€‚


```bash
function add {
  local result=$(( $1 + $2 ))
  return $result
}


add 3 4
echo "Sum: $?"
```


> å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª 8 ä½çš„æ•´æ•°ï¼ˆ0-255ï¼‰ï¼Œå› æ­¤å‡½æ•°çš„è¿”å›å€¼èŒƒå›´å—åˆ°é™åˆ¶ã€‚é€šå¸¸ï¼Œè¿”å›å€¼ç”¨äºè¡¨ç¤ºå‘½ä»¤çš„æ‰§è¡ŒçŠ¶æ€ï¼Œ0 è¡¨ç¤ºæˆåŠŸï¼Œéé›¶è¡¨ç¤ºå¤±è´¥ã€‚å¯ä»¥åœ¨å‡½æ•°ä¸­æ˜¾å¼çš„ä½¿ç”¨ `return` è¯­å¥è¿”å›è‡ªå®šä¹‰çš„æ•´æ•°å€¼ï¼Œä½†éœ€è¦æ³¨æ„é™åˆ¶ã€‚


å‡½æ•°çš„è¿”å›å€¼é€šå¸¸æ˜¯æ•´æ•°ï¼Œä¸ç›´æ¥æ”¯æŒè¿”å›å­—ç¬¦ä¸²ã€‚å¦‚æœéœ€è¦ä¼ é€’å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨å˜é‡æˆ–è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œç„¶ååœ¨è°ƒç”¨å‡½æ•°çš„åœ°æ–¹æ•è·è¾“å‡ºã€‚


```bash
function concatenate_strings {
  local result="$1$2"
  echo "$result"
}


ret=$(concatenate_strings "Hello, " "World!")
echo $ret  # è¾“å‡ºï¼šHello, World!


```


åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ `concatenate_strings` å‡½æ•°ä½¿ç”¨ `echo` å°†è¿æ¥åçš„å­—ç¬¦ä¸²è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œç„¶ååœ¨è°ƒç”¨å‡½æ•°çš„åœ°æ–¹æ•è·è¾“å‡ºã€‚


### å±€éƒ¨å˜é‡


åœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡é»˜è®¤æ˜¯å±€éƒ¨å˜é‡ï¼Œä¸ä¼šå½±å“åˆ°å‡½æ•°å¤–éƒ¨çš„åŒåå˜é‡ã€‚ï¼ˆç»†èŠ‚éƒ¨åˆ†å‚è€ƒä½œç”¨åŸŸç›¸å…³è¯´æ˜ï¼‰


```bash
function local_var_example {
  local my_var="Local variable"
  echo "Inside function: $my_var"
}


my_var="Global variable"
local_var_example
echo "Outside function: $my_var"
```


### è¿”å›å€¼


å‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä½œä¸ºå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ï¼Œç”¨ `$?` è·å–ã€‚


```bash
function is_even {
  if (( $1 % 2 == 0 )); then


    return 0  # 0 è¡¨ç¤ºçœŸï¼ˆå¶æ•°ï¼‰


  else


    return 1  # 1 è¡¨ç¤ºå‡ï¼ˆå¥‡æ•°ï¼‰


  fi
}


is_even 4
if [ $? -eq 0 ]; then
  echo "It's even."
else
  echo "It's odd."
fi


```


### åµŒå¥—è°ƒç”¨


å‡½æ•°å¯ä»¥åµŒå¥—è°ƒç”¨å…¶ä»–å‡½æ•°ã€‚


```bash
function outer_function {
  echo "This is outer function."
  inner_function
}


function inner_function {
  echo "This is inner function."
}


outer_function
```



# 2. ç›¸å…³æ–‡ç« 

_æ‘˜æŠ„æ¥æºï¼Œå¼•ç”¨å‡ºå¤„ï¼Œå‚è€ƒé“¾æ¥ï¼Œæ–‡æ¡£æŸ¥è¯¢_
Page Link::
