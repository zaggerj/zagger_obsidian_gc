---
alias:
tags: é•¿é’ç¬”è®°
cdate: 2023-12-17 13:18
uid: 20231217131821
searchterm: "#é•¿é’ç¬”è®°"
banner: "040 - Obsidian/é™„ä»¶/banners/book-banner.gif"
cssclass: noyaml
banner_icon: ğŸ’Œ
banner_x: 0.5
banner_y: 0.38
---

# 1. æœªå‘½å

## 1.1. Metadata

Status:: #ç¬”è®°çŠ¶æ€/ğŸŒ± å‘èŠ½
Source Type:: #ğŸ“¥/ğŸ’­ æƒ³æ³• 
Note Type:: #ç¬”è®°
Topic:: [[00.å­¦ä¹ -å‰ç«¯]]
Author:: zagger
Source URL::
Modify:: 2023-12-17 æ˜ŸæœŸæ—¥ 13:18:07

## 1.2. é•¿é’ç¬”è®°

_ä¸€å¥è¯æ¦‚æ‹¬è¿™ç¯‡ç¬”è®°çš„å†…å®¹_
Summary::

## 1.3. è‡ªæˆ‘é‡è¿°

_ç”¨è‡ªå·±çš„è¯å»é‡è¿°æå–çš„é‡ç‚¹å†…å®¹_

## 1.4. é‡ç‚¹æ‘˜æŠ„

_æ‘˜æŠ„éƒ¨åˆ†åŸæ–‡åï¼Œè¿›è¡Œç­›é€‰åŠ ç²—ç„¶åå¯¹åŠ ç²—çš„ç»§ç»­è¿›è¡Œç­›é€‰è§å…‰ç¬”é€‰å‡ºã€‚_

shellç¼–å†™è„šæœ¬
å†…ç½‘ä»“åº“å‰ç¼€ä¸ºï¼šGIT_INNER_PREFIX=http://172.16.203.254
å¤–ç½‘ä»“åº“å‰ç¼€ä¸ºï¼šGIT_OUTER_PREFIX=https://4c7757ee.r3.cpolar.cn
å‡è®¾gitlabä»“åº“åœ°å€ä¸ºï¼šhttp://172.16.203.254/xiaowei/console-fe.git
å…¶ä¸­ä»urlåè®®åˆ°ç¬¬ä¸€ä¸ª/ä¸ºurlå‰ç¼€ï¼Œ
å…¶ä¸­ä»ç¬¬ä¸€ä¸ªå•/åˆ°æœ€åï¼Œä¸ºurlåç¼€ï¼Œ
ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œ
å¤–éƒ¨ä¼ é€’ä¸€ä¸ªä¼ å‚ï¼Œå‡½æ•°é€šè¿‡git remote get-url origin è·å–ä»“åº“urlåœ°å€ï¼Œå­˜ä¸ºlocal_url
å¦‚æœå‡½æ•°ä¼ é€’è¿›æ¥çš„ï¼Œå‚æ•°æ˜¯trueï¼Œå°†local_urlçš„urlåŒ¹é…å‰ç¼€æ›¿æ¢ä¸ºå¤–ç½‘åœ°å€ï¼Œå¹¶å½¢æˆæ–°urlå­˜ä¸ºnew_urlï¼Œå¹¶é€šè¿‡git remote set-url origin new_urlé…ç½®ä»“åº“åœ°å€ä¸ºæ–°åœ°å€ï¼Œå°†è¯¥å‡½æ•°è°ƒç”¨è®¾ä¸ºalias public_url
å¦‚æœå‡½æ•°ä¼ é€’è¿›æ¥çš„ï¼Œå‚æ•°æ˜¯falseï¼Œå°†local_urlçš„urlåŒ¹é…å‰ç¼€æ›¿æ¢ä¸ºå†…ç½‘åœ°å€ï¼Œå¹¶å½¢æˆæ–°urlå­˜ä¸ºnew_urlï¼Œå¹¶é€šè¿‡git remote set-url origin new_urlé…ç½®ä»“åº“åœ°å€ä¸ºæ–°åœ°å€ï¼Œå°†è¯¥å‡½æ•°è°ƒç”¨è®¾ä¸ºalias private_url


```bash
  
  

function replace_git_prefix() {

Â  Â  local local_git_url=$(git remote get-url origin) Â # è·å–è¿œç¨‹URL

Â  Â  local use_inner_prefix=$1 Â # ä¼ å…¥çš„å¸ƒå°”å€¼å‚æ•°ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦ä½¿ç”¨å†…ç½‘å‰ç¼€

Â  Â  echo "$local_git_url"

Â  Â  if [[ $use_inner_prefix == true ]]; then

Â  Â  Â  Â  new_url=$(echo "$local_git_url" | sed -E "s/http.*:\/\/.*\//${GIT_INNER_PREFIX}/")

Â  Â  else

Â  Â  Â  Â  new_url=$(echo "$local_git_url" | sed -E "s/http.*:\/\/.*\//${GIT_OUTER_PREFIX}/")

Â  Â  fi

  

Â  Â  echo "æ›¿æ¢åçš„URL: $new_url"

Â  Â  git remote set-url origin "$new_url"

}

  

export public_url="replace_git_prefix false"

export private_url="replace_git_prefix true"
```
# 2. ç›¸å…³æ–‡ç« 

_æ‘˜æŠ„æ¥æºï¼Œå¼•ç”¨å‡ºå¤„ï¼Œå‚è€ƒé“¾æ¥ï¼Œæ–‡æ¡£æŸ¥è¯¢_
Page Link::
